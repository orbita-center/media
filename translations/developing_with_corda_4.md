[–ü–µ—Ä–µ–≤–æ–¥ —Å—Ç–∞—Ç—å–∏ Developing with Corda 4](https://medium.com/corda/developing-with-corda-4-36c96b4b3529)

![!](https://cdn-images-1.medium.com/max/2400/1*SfOX21aJBDRhTX7G6YJFcA.png)

–≠—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç–∞—Ç—å–∏ [Developing with Corda](https://lankydanblog.com/2018/06/05/developing-with-corda/), –∫–æ—Ç–æ—Ä—É—é —è –Ω–∞–ø–∏—Å–∞–ª –≤ –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É. –° —Ç–µ—Ö –ø–æ—Ä –º–Ω–æ–≥–æ–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –≤—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–º. –í Corda 4 —É–≤–µ–ª–∏—á–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —É–ª—É—á—à–∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø–æ—Å—Ç–∞—Ä–∞–ª–∏—Å—å –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ª—É—á—à–∏–π –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –ö—Å—Ç–∞—Ç–∏ –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º. –£–ª—É—á—à–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–µ–Ω–µ–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π. –ù–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Corda 3 –∏ 4, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –ö–∞–∫ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ - –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–ª–∏—á–∏–π. –≠—Ç–∏ –º–æ–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –æ—Å–≤–µ—â–µ–Ω—ã –≤ –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äì —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –æ—Å–Ω–æ–≤—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Corda.

–ï—Å–ª–∏ –≤—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å Corda —Ä–∞–Ω—å—à–µ, —Ç–æ –±–µ–≥–ª–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞ –±—É–¥–µ—Ç –≤–ø–æ–ª–Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å Corda 3 –∏ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ 4—é –≤–µ—Ä—Å–∏—é, —Ç–æ –±—ã—Å—Ç—Ä–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–æ–ª–∂–Ω–æ —Ö–≤–∞—Ç–∏—Ç—å, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É. –ù–æ, –µ—Å–ª–∏ –≤—ã –Ω–æ–≤–∏—á–æ–∫ –≤ Corda, —Ç–æ —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤–∞–º –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å [What is Corda?](https://lankydanblog.com/2018/06/05/what-is-corda/) –∏ [Corda key concepts](https://docs.corda.net/key-concepts.html).

–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —á–∏—Ç–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é [Developing with Corda](https://lankydanblog.com/2018/06/05/developing-with-corda/).

–í [What is Corda?](https://lankydanblog.com/2018/06/05/what-is-corda/) –±—ã–ª –¥–∞–Ω –æ–±–∑–æ—Ä —Ç–æ–≥–æ, —á–µ–≥–æ Corda –ø—ã—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∏—á—å, –∏ –∫–∞–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞, –ø–æ—ç—Ç–æ–º—É –º—ã –º–æ–∂–µ–º –ø–æ–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –Ω–æ –æ–Ω–∞ –Ω–µ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Corda. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Corda —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É, —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –º—ã –º–æ–∂–µ–º –Ω–∞—á–∞—Ç—å –ø–∏—Å–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–∞–ª—å–Ω–æ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è Corda. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏–∑—É—á–µ–Ω–∏—è –Ω–µ–∫–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞. –ù–æ –Ω–∞–º –Ω—É–∂–µ–Ω –≥–æ–ª–æ—Å –≤ –Ω–∞—à–∏—Ö –≥–æ–ª–æ–≤–∞—Ö, —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –Ω–∞–º –≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ –º—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≥—Ä–æ—Å—Å–±—É—Ö–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å —à–∞–≥–∏, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–∑–¥–∞–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã.

–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Corda.

Corda —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å –ª—é–±—ã–º JVM —è–∑—ã–∫–æ–º. –Ø –∑–Ω–∞—é, –æ —á–µ–º –≤—ã –¥—É–º–∞–µ—Ç–µ, –Ω–æ –Ω–µ—Ç, Corda –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Java. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Kotlin. –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –Ω–µ–∫–æ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å Kotlin, –Ω–æ –µ—Å–ª–∏ –≤—ã –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å Java (–∫–∞–∫ —è), —Ç–æ —ç—Ç–æ –Ω–µ –∑–∞–π–º–µ—Ç —É –≤–∞—Å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ü–æ—ç—Ç–æ–º—É —è –ª–∏—á–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø–∏—Å–∞—Ç—å –≤–∞–º –∫–æ–¥ –Ω–∞ Kotlin, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–µ—Å—å —Å—Ç–µ–∫ –Ω–∞ –æ–¥–Ω–æ–º —è–∑—ã–∫–µ. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç, –∫–æ–≥–¥–∞ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∫–æ–¥–µ Corda, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –±—É–¥–µ—Ç –ø–æ—Ö–æ–∂ –Ω–∞ —Ç–æ, —á—Ç–æ –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–∏—Å–∞–ª–∏. –û—á–µ–≤–∏–¥–Ω–æ, —ç—Ç–æ —Ç–æ–ª—å–∫–æ –º–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Clojure. –ù–æ –≤–∞–º –±—É–¥–µ—Ç —Ç—Ä—É–¥–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ  –ø—Ä–∏–º–µ—Ä—ã –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏—Ö –≤ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç—ã Clojure.

–ù–µ–º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–æ –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –ø—Ä—è–º–æ –≤ –∫–æ–¥, –Ω–µ —Ä–∞–∑–æ–±—Ä–∞–≤—â–∏—Å—å —Å–Ω–∞—á–∞–ª–∞ —Å [–∫–ª—é—á–µ–≤—ã–º–∏ –ø–æ–Ω—è—Ç–∏—è–º–∏ Corda](https://docs.corda.net/key-concepts.html). –õ–∏—á–Ω–æ —è —Å—á–∏—Ç–∞—é, —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞ –∏ –¥–æ–ª–∂–Ω–∞ –ø–æ–º–æ—á—å –≤–∞–º —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏.

–í —Ä–∞–º–∫–∞—Ö —Å—Ç–∞—Ç—å–∏, –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∑–ª–æ–≤ Corda, –∏ —Å—Ä–∞–∑—É –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ Corda –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

# –û–±–∑–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–µ–∂–¥–µ, —á–µ–º –º—ã —Å–º–æ–∂–µ–º –Ω–∞—á–∞—Ç—å –ø–∏—Å–∞—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–æ–¥, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä, —è –±—É–¥—É –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ [—É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã r3](https://github.com/corda/corda-training-solutions), –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä "IOU" –ø—Ä–æ—Ü–µ—Å—Å–∞ ("—è –¥–æ–ª–∂–µ–Ω –≤–∞–º"), –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø—Ä–æ—Å–∏—Ç –¥–µ–Ω—å–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –ø–æ–∑–∂–µ. –í –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–Ω—Ü–µ—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ –≤—ã–ø—É—Å–∫–µ –¥–æ–ª–≥–æ–≤–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (IOU).

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ —Å—Ö–µ–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –æ—á–µ–Ω—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —à–∞–≥–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≤—ã–¥–∞—á–µ–π IOU –º–µ–∂–¥—É –¥–≤—É–º—è –ª—é–¥—å–º–∏:
![](https://cdn-images-1.medium.com/max/1600/1*UN-usDwMvdRkadkKuiZS-A.png)

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –∑–∞–µ–º—â–∏–∫ –ø—Ä–æ—Å–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –¥–µ–Ω–µ–≥, –µ—Å–ª–∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è, —Ç–æ –æ–Ω–∏ –æ–±–∞ –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç, —á—Ç–æ –∑–∞–µ–º—â–∏–∫ –¥–æ–ª–∂–µ–Ω –∫—Ä–µ–¥–∏—Ç–æ—Ä—É –Ω–µ–º–Ω–æ–≥–æ –¥–µ–Ω–µ–≥. –≠—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ—Å–ª–æ–∂–Ω—ã–π, –Ω–æ –¥–∞–∂–µ –∑–¥–µ—Å—å –æ–Ω –±—ã–ª –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω. –í —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –º—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —É–ø–æ–º–∏–Ω–∞–ª–∏, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –¥–µ–Ω—å–≥–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏. –û—Å—Ç–∞–≤–∏–º —ç—Ç–æ—Ç –ø–µ—Ä–µ–≤–æ–¥ –∑–∞ —Ä–∞–º–∫–∞–º–∏ —É—Ä–æ–∫–∞ –∏ –ø—Ä–æ—Å—Ç–æ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –¥–µ–Ω–µ–≥ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.

–¢–∞–∫ –∫–∞–∫ –∂–µ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç—Å—è –≤ Corda? –ù–æ, –ø—Ä–µ–∂–¥–µ —á–µ–º –º—ã –ø—Ä–æ–¥–æ–ª–∂–∏–º, —è —Ö–æ—á—É —É–ø–æ–º—è–Ω—É—Ç—å –æ [–∫–ª—é—á–µ–≤—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏—è—Ö Corda](https://docs.corda.net/key-concepts.html), –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –≤–∞–∂–Ω—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

–ß—Ç–æ–±—ã —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤ Corda, –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —à–∞–≥–∏. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–≥–æ, —Å–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥ –∑–∞–Ω—è—Ç—å, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–Ω–∏–º–∞–µ–º—ã—Ö –¥–µ–Ω—å–≥–∞—Ö. –°—Ç–æ—Ä–æ–Ω–∞, –¥–æ–≤–æ–ª—å–Ω–∞—è —Ç–µ–º, —á—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è, —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ–º —Å–¥–µ–ª–∫–∏ —Å–≤–æ–∏–º –∫–ª—é—á–æ–º. –°–≤—è–∑—å –º–µ–∂–¥—É –∑–∞–µ–º—â–∏–∫–æ–º –∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä–æ–º –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–¥–µ–ª–∫–∏ –º–µ–∂–¥—É –Ω–∏–º–∏. –î–∞–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–¥–µ–ª–∫–µ, –∫—Ç–æ –∫–æ–º—É –∏ —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–∂–µ–Ω, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–∏–∑–æ—à–ª–∞, "–≤—ã—Å–µ–∫–∞–µ—Ç—Å—è –≤ –∫–∞–º–Ω–µ" (—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è). –ò–∑–º–µ–Ω—è—è –¥–∏–∞–≥—Ä–∞–º–º—É —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–π –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –º—ã –ø–æ–ª—É—á–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:

![](https://cdn-images-1.medium.com/max/1600/1*8LYhsfGcsZJYRR8wpcOw4Q.png)

–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤, –Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç. –î–∏–∞–≥—Ä–∞–º–º–∞ –≥–æ–≤–æ—Ä–∏—Ç —Å–∞–º–∞ –∑–∞ —Å–µ–±—è, –∏ —è –Ω–µ –¥—É–º–∞—é, —á—Ç–æ –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –∫ –Ω–µ–π —á—Ç–æ-—Ç–æ –µ—â–µ. –ù–æ —á—Ç–æ —è —Å–∫–∞–∂—É, —Ç–∞–∫ —ç—Ç–æ —Ç–æ, —á—Ç–æ —è –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—Å—Ç–∏–ª –¥–∏–∞–≥—Ä–∞–º–º—É, —É–¥–∞–ª–∏–≤ `–ù–æ—Ç–∞—Ä–∏—É—Å–∞`, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å. –ü–æ–∑–∂–µ –º—ã –∫–æ—Å–Ω–µ–º—Å—è —Ç–æ–≥–æ, –∫—Ç–æ —Ç–∞–∫–æ–µ `–ù–æ—Ç–∞—Ä–∏—É—Å` –æ—á–µ–Ω—å-–æ—á–µ–Ω—å-–æ—á–µ–Ω—å –∫—Ä–∞—Ç–∫–æ, –≥–¥–µ —è –ø—Ä–µ–¥–ª–æ–∂—É –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Corda](https://docs.corda.net/key-concepts-notaries.html) –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É (–∏ —Å–¥–µ–ª–∞—é —ç—Ç–æ —Å–Ω–æ–≤–∞ –ø–æ–∑–∂–µ).

–≠—Ç–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–æ–ª–∂–Ω—ã –∑–∞–¥–∞—Ç—å –Ω–∞–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Corda –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–ø—É—Å–∫–∞ –¥–æ–ª–≥–æ–≤–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –º–µ–∂–¥—É –¥–≤—É–º—è —Å—Ç–æ—Ä–æ–Ω–∞–º–∏.

# States (–°–æ—Å—Ç–æ—è–Ω–∏—è)

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é, –∏, –¥–∞–≤–∞–π—Ç–µ, –Ω–∞—á–Ω–µ–º —Å —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](https://docs.corda.net/key-concepts-states.html) –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Corda. –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ —Å–µ—Ç–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –∏ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –≥—Ä–æ—Å—Å–±—É—Ö–µ. –í —Ç–µ—Ä–º–∏–Ω–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ö–æ–¥–Ω—ã–º –∏–ª–∏ –≤—ã—Ö–æ–¥–Ω—ã–º, –∏ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ —Ç–∞–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. –°–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö.

–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, —è –æ–ø–∏—Ä–∞—é—Å—å –Ω–∞ [—É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã r3](https://github.com/corda/corda-training-solutions). –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ `IOUState` —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
```kotlin
@BelongsToContract(IOUContract::class)
data class IOUState(
  val amount: Amount<Currency>,
  val lender: Party,
  val borrower: Party,
  val paid: Amount<Currency> = Amount(0, amount.token),
  override val linearId: UniqueIdentifier = UniqueIdentifier()
) : LinearState {

  override val participants: List<Party> get() = listOf(lender, borrower)
}
```
–í —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ "–¥–æ–ª–≥–æ–≤–æ–π —Ä–∞—Å–ø–∏—Å–∫–∏" ("IOU") –≤ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –ø–æ–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π –º–æ–∂–Ω–æ –±–µ–∑ –æ—Å–æ–±–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è: `amount` - —ç—Ç–æ —Å—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞, `lender` - —Å—Ç–æ—Ä–æ–Ω–∞, —Å—Å—É–∂–∞—é—â–∞—è –¥–µ–Ω—å–≥–∏ (–∫—Ä–µ–¥–∏—Ç–æ—Ä) –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –æ–±—ä—è—Å–Ω–µ–Ω–∏–∏, - —ç—Ç–æ `linearId` —Ç–∏–ø–∞ `UniqueIdentifier`, —ç—Ç–æ—Ç —Å–≤–æ–π—Å—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —è–≤–ª—è–µ—Ç—Å—è `UUID`, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏, —ç—Ç–æ `internalId`, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∏–∑ –∫–ª–∞—Å—Å–∞ `UUID`.

–°–æ—Å—Ç–æ—è–Ω–∏–µ `IOUState` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `LinearState`, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –æ–±—â–∏—Ö —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ Corda –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–º–µ—Å—Ç–µ —Å `FungibleState`. –û–±–∞ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ `ContractState`. `LinearState` —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ, —Ü–∏—Ç–∏—Ä—É—è —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã, *–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—É—Ç–µ–º –∑–∞–º–µ–Ω—ã —Å–µ–±—è*. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ –∫–∞–∫ –≤—Ö–æ–¥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –≤—ã—Ö–æ–¥–æ–º –±–æ–ª–µ–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏. –°—Ç–∞—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ `CONSUMED` –∏–∑ `UNCONSUMED` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (`vault`) (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è Corda –Ω–∞–¥ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö).

`ContractState` —Ç—Ä–µ–±—É–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–£—á–∞—Å—Ç–Ω–∏–∫–∏ —è–≤–ª—è—é—Ç—Å—è –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é —Å–æ—Å—Ç–æ—è–Ω–∏—è. –°—Ç–æ—Ä–æ–Ω—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ, –ø–æ–ª—É—á–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ / –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ, —á—Ç–æ –≤–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å –æ–± —ç—Ç–æ–º, —Ç–æ —ç—Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–æ–±–ª–µ–º–∞. –Ø –ª–∏—á–Ω–æ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å —ç—Ç–æ–π –æ—à–∏–±–∫–æ–π –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª –±–æ–ª—å.

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –∫–æ–¥–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –±—ã–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã –Ω–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∞ –≤ –≥–µ—Ç—Ç–µ—Ä –¥–ª—è `participants`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è. –ó–¥–µ—Å—å –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ—Ä–∞ (`lender`) –∏ –∑–∞–µ–º—â–∏–∫–∞ (`borrower`), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏, —É—á–∞—Å—Ç–≤—É—é—â–∏–º–∏ –≤ —Å–¥–µ–ª–∫–µ. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —Ç–æ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∏–∂–µ:
```kotlin
@BelongsToContract(IOUContract::class)
data class IOUState(
  val amount: Amount<Currency>,
  val lender: Party,
  val borrower: Party,
  val paid: Amount<Currency> = Amount(0, amount.token),
  override val linearId: UniqueIdentifier = UniqueIdentifier(),
  override val participants: List<Party> = listOf(lender, borrower)
) : LinearState
```
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±—Ä–∞—Ç—å, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª—É—á–∞—è, –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ –∏—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

–ï—â–µ –æ–¥–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –≤–µ—â—å, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞–∑–¥–µ–ª—É. –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è `@BelongsToContract`, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω–µ–µ –Ω–µ —É–ø–æ–º–∏–Ω–∞–ª–∞—Å—å, —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º (–∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ). –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–æ—Ç –∂–µ –∫–æ–¥ –±–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ - —ç—Ç–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∞—Å—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```kotlin
class IOUContract : Contract {

  data class IOUState(
    val amount: Amount<Currency>,
    val lender: Party,
    val borrower: Party,
    val paid: Amount<Currency> = Amount(0, amount.token),
    override val linearId: UniqueIdentifier = UniqueIdentifier(),
    override val participants: List<Party> = listOf(lender, borrower)
  ) : LinearState
}
```
–ï—Å–ª–∏ –≤—ã –Ω–µ —Å–¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ–≥–æ –∏–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
```
[WARN] 16:41:55,620 [Test worker] contracts.TransactionState.<init> - State class net.corda.training.state.IOUState
is not annotated with @BelongsToContract, and does not have an enclosing class which implements Contract.
Annotate IOUState with @BelongsToContract(net.corda.training.contract.IOUContract.class) to remove this warning.
```
–ö —Å—á–∞—Å—Ç—å—é –¥–ª—è –≤–∞—Å, —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –¥–æ–ª–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–æ–¥–æ–≤—É—é –±–∞–∑—É Corda, —Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ, –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [–ø—Ä–∏–º–µ—á–∞–Ω–∏—è—Ö –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é Corda 3 –¥–æ 4](https://docs.corda.net/head/upgrade-notes.html#step-7-security-add-belongstocontract-annotations).

# Contracts (–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã)

–°–ª–µ–¥—É—é—â–∏–µ —É –Ω–∞—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω, —É—á–∞—Å—Ç–≤—É—é—â–∏–º–∏ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ö–æ–º–∞–Ω–¥–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ –≤—ã–ø–ª–∞—Ç–∞ –ø—Ä–∏—á–∏—Ç–∞—é—â–∏—Ö—Å—è –¥–µ–Ω–µ–≥. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–º–∞–Ω–¥—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–∂–µ –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ, –Ω–æ –º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–Ω–∏–º–∞—Ç—å –∏—Ö —Å–µ–π—á–∞—Å.

–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–∏—è—Ç–Ω–æ –ø–∏—Å–∞—Ç—å –∏–∑-–∑–∞ –∏—Ö –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ú—ã –º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å —É—Å–ª–æ–≤–∏—è –≤ –¥–æ–≥–æ–≤–æ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, —á—Ç–æ–±—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—ã–ª–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ–π. –ï—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —É—Å–ª–æ–≤–∏—è –Ω–µ —Å–æ–±–ª—é–¥–µ–Ω—ã, —Ç–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –û–±—ã—á–Ω–æ —ç—Ç–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –≤–æ–≤–ª–µ—á–µ–Ω–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å—á–∏—Ç–∞–µ—Ç –µ–µ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π.

–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç DSL `requireThat`, –∫–æ—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Corda –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —É—Å–ª–æ–≤–∏–π –≤–º–µ—Å—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Å–æ–æ–±—â–∞—é—Ç, —á—Ç–æ –Ω–µ —Ç–∞–∫ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ —É—Å–ª–æ–≤–∏—è –∫–æ–¥–∞ —Ö–æ—Ä–æ—à–æ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–∏–ª–∏ –ª—é–±—ã–º —è–∑—ã–∫–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Ö –Ω–∞–ø–∏—Å–∞—Ç—å).

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ `IOUState` —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—ã—à–µ:
```kotlin
class IOUContract : Contract {

  companion object {
    @JvmStatic
    val IOU_CONTRACT_ID = "net.corda.training.contract.IOUContract"
  }

  interface Commands : CommandData {
    class Issue : TypeOnlyCommandData(), Commands
    class Transfer : TypeOnlyCommandData(), Commands
    class Settle : TypeOnlyCommandData(), Commands
  }

  override fun verify(tx: LedgerTransaction) {
    val command = tx.commands.requireSingleCommand<IOUContract.Commands>()
    when (command.value) {
      is Commands.Issue -> requireThat {
        "No inputs should be consumed when issuing an IOU." using (tx.inputs.isEmpty())
        "Only one output state should be created when issuing an IOU." using (tx.outputs.size == 1)
        val iou = tx.outputStates.single() as IOUState
        "A newly issued IOU must have a positive amount." using (iou.amount.quantity > 0)
        "The lender and borrower cannot have the same identity." using (iou.borrower != iou.lender)
        "Both lender and borrower together only may sign IOU issue transaction." using
                (command.signers.toSet() == iou.participants.map { it.owningKey }.toSet())
      }
      is Commands.Transfer -> requireThat {
        // more conditions
      }
      is Commands.Settle -> {
        // more conditions
      }
    }
  }
}
```
–î–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ —è —É–ø—Ä–æ—Å—Ç–∏–ª –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–º–∞–Ω–¥. –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å–≤–µ—Ä—Ö—É –∏ –±—É–¥–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–Ω–∏–∑.

`IOUContract` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `Contract`, —Ç—Ä–µ–±—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏—é `verify` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ—Ç—Å—é–¥–∞ –∏ –∏–º—è) —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

## –ò–º—è –∫–ª–∞—Å—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

–ò–º—è –∫–ª–∞—Å—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —É–∫–∞–∑–∞–Ω–æ –∑–¥–µ—Å—å:
```kotlin
companion object {
  @JvmStatic
  val IOU_CONTRACT_ID = "net.corda.contracts.IOUContract"
}
```

–≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö Corda, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è. –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º—è, –µ—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω –Ω–∏–∂–µ:
```java
companion object {
  @JvmStatic
  val IOU_CONTRACT_ID = IOUContract::class.qualifiedName!!
}
```

## Commands (–ö–æ–º–∞–Ω–¥—ã)

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ –∫–æ–º–∞–Ω–¥–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —è –∫—Ä–∞—Ç–∫–æ —É–ø–æ–º–∏–Ω–∞–ª —Ä–∞–Ω–µ–µ –≤ —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ. –Ø –ø–æ–º–µ—Å—Ç–∏–ª –∏—Ö –Ω–∏–∂–µ, –ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å:
```kotlin
interface Commands : CommandData {
  class Issue : TypeOnlyCommandData(), Commands
  class Transfer : TypeOnlyCommandData(), Commands
  class Settle : TypeOnlyCommandData(), Commands
}
```
–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –û–Ω–∏ –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∑–¥–µ—Å—å –∏–∑-–∑–∞ –∏—Ö —Å–≤—è–∑–∏ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ —É—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–Ω—ã. –ü—Ä–∏ —ç—Ç–æ–º –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –∏–ª–∏ –≤–Ω–µ –∫–ª–∞—Å—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –Ω–æ –≤ —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ. –ü–æ–∫–∞ –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞–∏–ª—É—á—à–∏–º –æ–±—Ä–∞–∑–æ–º –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—à–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ, –≤—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∏–¥–µ—Ç–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.

–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è, —Ç–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `TypeOnlyCommandData`. –î–æ—Å—Ç—É–ø–Ω—ã –¥—Ä—É–≥–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã, –æ–ø—ã–≤–∞—é—â–∏–∏—Å–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, `MoveCommand`.

–ú—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.

## –û—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –º–∞–≥–∏–∏. –ö–æ–¥ –±—ã–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏ –≤—Å—Ç–∞–≤–ª–µ–Ω –Ω–∏–∂–µ:
```kotlin
override fun verify(tx: LedgerTransaction) {
  val command = tx.commands.requireSingleCommand<IOUContract.Commands>()
  when (command.value) {
    is Commands.Issue -> requireThat {
      "No inputs should be consumed when issuing an IOU." using (tx.inputs.isEmpty())
      "Only one output state should be created when issuing an IOU." using (tx.outputs.size == 1)
      val iou = tx.outputStates.single() as IOUState
      "A newly issued IOU must have a positive amount." using (iou.amount.quantity > 0)
      "The lender and borrower cannot have the same identity." using (iou.borrower != iou.lender)
      "Both lender and borrower together only may sign IOU issue transaction." using
              (command.signers.toSet() == iou.participants.map { it.owningKey }.toSet())
    }
    is Commands.Transfer -> requireThat {
      // more conditions
    }
    is Commands.Settle -> {
      // more conditions
    }
  }
}
```
–§—É–Ω–∫—Ü–∏—è `verify` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–ø—É—Å—Ç–∏–º–æ–π. –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∞ –¥–∞–ª—å—à–µ –∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±—É–¥–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤ –≥—Ä–æ—Å—Å–±—É—Ö–µ. –ù–æ, –µ—Å–ª–∏ –∫–∞–∫–æ–µ-–ª–∏–±–æ –∏–∑ —É—Å–ª–æ–≤–∏–π –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `IllegalArgumentException`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

–ò—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤–æ–∑–Ω–∏–∫–∞—é—Ç, –∫–æ–≥–¥–∞ Corda —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏. –ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –Ω–∏—á—Ç–æ –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –µ–≥–æ –ø–æ–π–º–∞—Ç—å, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç "–≤—Å–ø–ª—ã–≤–∞—Ç—å" –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç –ø–æ–π–º–∞–Ω–æ –∏–ª–∏ –Ω–µ –æ–∫–∞–∂–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å–æ–ª–∏. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –µ–≥–æ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –¥–∞–∂–µ –Ω–∞ —É–∑–ª–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞, –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É.

–í —Å–∞–º–æ–º –∫–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ —Å–≤–æ–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö, –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏. DSL `requireThat`, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Corda, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å —É—Å–ª–æ–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `true` –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ `false`.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–¥–Ω–æ –∏–∑ `requireThat` –≤—ã—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ:
```kotlin
val iou = tx.outputStates.single() as IOUState
"A newly issued IOU must have a positive amount." using (iou.amount.quantity > 0)
```

–ó–¥–µ—Å—å –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã —á—Ç–æ-—Ç–æ —Å–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—è—Ç—å. DSL –∑–∞–±–æ—Ç–∏—Ç—Å—è –æ –Ω–∞–º–µ—Ä–∏–≤–∞–Ω–∏–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è. –¢–æ, —á—Ç–æ —è —É–∫–∞–∂—É, - —ç—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
> `<string message of what condition should be met> using <condition it must pass>`
 
–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –•–æ—Ç—è —è –æ—Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –Ω–∞ —ç—Ç–æ–º –º–æ–º–µ–Ω—Ç–µ. –¢–æ, —á—Ç–æ –≥–ª—É–ø–æ –ª–æ–≤–∏–ª–æ –º–µ–Ω—è, –∫–æ–≥–¥–∞ —è –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å —Å Corda, –±—ã–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–∫–æ–±–æ–∫ –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ `using`, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª—ã. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∏—Ö —Å–∫–æ–±–æ–∫ –º–æ–∂–µ—Ç "–ø–æ–¥–∞—Ä–∏—Ç—å" –≤–∞–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏. –ù–∞–∫–æ–Ω–µ—Ü, DSL –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å–ª–æ–≤–∏–π, –ø–æ–∑–≤–æ–ª—è—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö.

–ü–æ–∫–∞ —Ö–≤–∞—Ç–∏—Ç –ø—Ä–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã. –û–Ω–∏ —Å–Ω–æ–≤–∞ –ø–æ—è–≤—è—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ, –∫–æ–≥–¥–∞ –º—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç `IOUContract` –≤ –¥–µ–π—Å—Ç–≤–∏–∏.

# Flows (–ü–æ—Ç–æ–∫–∏)

–í Corda –ø–æ—Ç–æ–∫–∏ —è–≤–ª—è—é—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–æ–π, –≥–¥–µ –º—ã —Å–≤—è–∑—ã–≤–∞–µ–º –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã. –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –∫–æ–º–∞–Ω–¥—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–µ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –µ–µ –≤ –≥—Ä–æ—Å—Å–±—É—Ö, –µ—Å–ª–∏ –≤—Å–µ –±—É–¥—É—Ç –¥–æ–≤–æ–ª—å–Ω—ã. –í–Ω—É—Ç—Ä–∏ –ø–æ—Ç–æ–∫–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏, –Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –º—ã –±—É–¥–µ–º –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –æ—Å–Ω–æ–≤.

–û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤, —Ç–µ–ø–µ—Ä—å –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º `IOUIssueFlow`. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –∫–æ–¥ —Ü–µ–ª–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∑–∞—Ç–µ–º —Ä–∞–∑–¥–µ–ª–∏–º –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º:
```kotlin
@InitiatingFlow
@StartableByRPC
class IOUIssueFlow(val state: IOUContract.IOUState) : FlowLogic<SignedTransaction>() {
  @Suspendable
  override fun call(): SignedTransaction {
    val transaction: TransactionBuilder = transaction()
    val signedTransaction: SignedTransaction = verifyAndSign(transaction)
    val sessions: List<FlowSession> = (state.participants - ourIdentity).map { initiateFlow(it) }.toSet().toList()
    val transactionSignedByAllParties: SignedTransaction = collectSignature(signedTransaction, sessions)
    return recordTransaction(transactionSignedByAllParties, sessions)
  }

  private fun transaction(): TransactionBuilder {
    val notary: Party = serviceHub.networkMapCache.notaryIdentities.first()
    val issueCommand: Command<IOUContract.Commands.Issue> =
      Command(IOUContract.Commands.Issue(), state.participants.map { it.owningKey })
    val builder = TransactionBuilder(notary = notary)
    builder.addOutputState(state, IOUContract.IOU_CONTRACT_ID)
    builder.addCommand(issueCommand)
    return builder
  }

  private fun verifyAndSign(transaction: TransactionBuilder): SignedTransaction {
    transaction.verify(serviceHub)
    return serviceHub.signInitialTransaction(transaction)
  }

  @Suspendable
  private fun collectSignature(
    transaction: SignedTransaction,
    sessions: List<FlowSession>
  ): SignedTransaction = subFlow(CollectSignaturesFlow(transaction, sessions))

  @Suspendable
  private fun recordTransaction(transaction: SignedTransaction, sessions: List<FlowSession>): SignedTransaction =
    subFlow(FinalityFlow(transaction, sessions))
}

@InitiatedBy(IOUIssueFlow::class)
class IOUIssueFlowResponder(val flowSession: FlowSession) : FlowLogic<SignedTransaction>() {

  @Suspendable
  override fun call(): SignedTransaction {
    val signTransactionFlow = object : SignTransactionFlow(flowSession) {
      override fun checkTransaction(stx: SignedTransaction) = requireThat {
        val output = stx.tx.outputs.single().data
        "This must be an IOU transaction" using (output is IOUContract.IOUState)
      }
    }
    val signedTransaction = subFlow(signTransactionFlow)
    return subFlow(ReceiveFinalityFlow(otherSideSession = flowSession, expectedTxId = signedTransaction.id))
  }
}
```
–ü–æ—Ç–æ–∫ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ (–¥–∞, —ç—Ç–æ –∫–∞–ª–∞–º–±—É—Ä üòÖ) –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –±—É–¥–µ—Ç –æ–¥–Ω–∏–º –∏–∑ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ –≤ —Å–≤–æ–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –Ø –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–∞–ø–∏—Å–∞–ª –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥ –∏–ª–∏ –æ–∫–æ–ª–æ —Ç–æ–≥–æ, –∫–∞–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã, —Ç–∞–∫ –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–∏—Ö –ø–æ—Å—Ç–æ–≤ –≤ –±–ª–æ–≥–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –ï—Å–ª–∏ —á–µ—Å—Ç–Ω–æ, –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —è –Ω–∞—á–∏–Ω–∞—é –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç, —è –∫–æ–ø–∏—Ä—É—é –∏ –≤—Å—Ç–∞–≤–ª—è—é –æ–¥–∏–Ω –ø–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º, –∞ –∑–∞—Ç–µ–º –Ω–∞—á–∏–Ω–∞—é —Å –Ω–µ–≥–æ. –≠—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–µ–Ω—è –µ—â–µ –Ω–µ –ø–æ–¥–≤–æ–¥–∏–ª–∞ üôÇ.

–ö–æ–Ω–µ—á–Ω–æ, –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ –ø–æ—Ç–æ–∫–∏ —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ. –Ø —Ä–∞–∑–¥–µ–ª–∏–ª `call` —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –Ω–∞–º–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–µ–µ. –ù–æ —è –Ω–µ –¥—É–º–∞—é, —á—Ç–æ —á—Ç–æ-—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ—â–µ, —á–µ–º —ç—Ç–æ üòé.

–õ–∞–¥–Ω–æ, —Ö–≤–∞—Ç–∏—Ç –æ–±–æ –º–Ω–µ, –≤–µ—Ä–Ω–µ–º—Å—è –∫ –∫–æ–¥—É.

–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:

* –°–æ–∑–¥–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
* –î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
* –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
* –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
* –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –∑–Ω–∞–µ–º —à–∞–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ, –º—ã –º–æ–∂–µ–º –æ–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–¥–µ.

## –ò–Ω–∏—Ü–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞

–í–æ—Ç –∫–æ–¥ —Å–Ω–æ–≤–∞ —Ç–æ–ª—å–∫–æ —Å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –∏–∑ –Ω–µ–≥–æ –∏–Ω–∏—Ü–∏–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ—Ç–æ–∫–∞:
```kotlin
@InitiatingFlow
@StartableByRPC
class IOUIssueFlow(val state: IOUContract.IOUState) : FlowLogic<SignedTransaction>() {
  @Suspendable
  override fun call(): SignedTransaction {
    val transaction: TransactionBuilder = transaction()
    val signedTransaction: SignedTransaction = verifyAndSign(transaction)
    val sessions: List<FlowSession> = (state.participants - ourIdentity).map { initiateFlow(it) }.toSet().toList()
    val transactionSignedByAllParties: SignedTransaction = collectSignature(signedTransaction, sessions)
    return recordTransaction(transactionSignedByAllParties, sessions)
  }

  private fun transaction(): TransactionBuilder {
    val notary: Party = serviceHub.networkMapCache.notaryIdentities.first()
    val issueCommand: Command<IOUContract.Commands.Issue> =
      Command(IOUContract.Commands.Issue(), state.participants.map { it.owningKey })
    val builder = TransactionBuilder(notary = notary)
    builder.addOutputState(state, IOUContract.IOU_CONTRACT_ID)
    builder.addCommand(issueCommand)
    return builder
  }

  private fun verifyAndSign(transaction: TransactionBuilder): SignedTransaction {
    transaction.verify(serviceHub)
    return serviceHub.signInitialTransaction(transaction)
  }

  @Suspendable
  private fun collectSignature(
    transaction: SignedTransaction,
    sessions: List<FlowSession>
  ): SignedTransaction = subFlow(CollectSignaturesFlow(transaction, sessions))

  @Suspendable
  private fun recordTransaction(transaction: SignedTransaction, sessions: List<FlowSession>): SignedTransaction =
    subFlow(FinalityFlow(transaction, sessions))
}
```
–í–æ-–ø–µ—Ä–≤—ã—Ö, –∫–ª–∞—Å—Å –ø–æ—Ç–æ–∫–∞ –∞–Ω–Ω–æ—Ç–∏—Ä—É–µ—Ç—Å—è `@InitiatingFlow` –∏ —Ä–∞—Å—à–∏—Ä—è–µ—Ç `FlowLogic`. –≠—Ç–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –ª—é–±–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–≤—è–∑—å —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–º. `FlowLogic` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–Ω—É –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `call`, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –ø–æ—Ç–æ–∫–µ. –ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—Å—è –º–∞–≥–∏—è. –ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, —á—Ç–æ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–∑–∂–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—ã–∑–æ–≤, –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª—é–±–∞—è –ª–æ–≥–∏–∫–∞, –ø–æ–º–µ—â–µ–Ω–Ω–∞—è –≤ —Ñ—É–Ω–∫—Ü–∏—é. `FlowLogic` —è–≤–ª—è–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∏–∫–æ–º (`FlowLogic <T>`), –≥–¥–µ `T` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `call`. –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `SignedTransaction`, –Ω–æ –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FlowLogic<Unit>`, –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ –æ–±—Ä–∞—Ç–Ω–æ –≤—ã–∑—ã–≤–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Ç–æ–∫–∞.

–î–∞–ª–µ–µ –∏–¥–µ—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@StartableByRPC`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –∏–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è RPC, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –º–µ–∂–¥—É –≤–Ω–µ—à–Ω–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π —É–∑–ª–∞ Corda –∏ –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. –ú—ã –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ –∫–æ—Å–Ω–µ–º—Å—è —ç—Ç–æ–≥–æ, –∫–æ–≥–¥–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∑–∞–ø—É—Å–∫ –ø–æ—Ç–æ–∫–∞.

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –µ—â–µ –æ–¥–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è. `@Suspendable` –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∏–∑ `quasar-core`, –∞ –Ω–µ –∏–∑ –æ–¥–Ω–æ–π –∏–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ Corda. –ï—Å–ª–∏ –≤—ã –∑–∞–±—É–¥–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –µ—ë, —Ç–æ —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –Ω–∏–∂–µ –∏ –≤–∞—à –ø–æ—Ç–æ–∫ –∑–∞–≤–∏—Å–Ω–µ—Ç:
```
java.lang.IllegalArgumentException: Transaction context is missing. This might happen if a suspendable method is not annotated with @Suspendable annotation.
```

`@Suspendable` –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–º. –ö–∞–∫ —Å–ª–µ–¥—É–µ—Ç –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è `suspendable`, –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç –¥–µ–ª–æ —Å–æ —Å–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏, –∏ —ç—Ç–æ –∫—Ä–∞—Ç–∫–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç–æ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Corda –ø–æ –ø–æ—Ç–æ–∫–∞–º](https://docs.corda.net/flow-state-machines.html#suspendable-functions).

–í –º–æ–µ–π –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞ —è –≥–æ–≤–æ—Ä–∏–ª –æ–± –æ—à–∏–±–∫–µ, –∑–∞–ø—É—Ç–∞–Ω–Ω–æ–π –∏ –Ω–µ—Å–≤—è–∑–∞–Ω–Ω–æ–π. –ù–æ, –ø–æ—Ö–æ–∂–µ, —á—Ç–æ —ç—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è —Ä–∞–∑—Ä–µ—à–∏–ª–∞—Å—å, –∏ —Ç–µ–ø–µ—Ä—å –±—ã–ª–æ –≤—ã–¥–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –æ–±—ä—è—Å–Ω—è—é—â–µ–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ç–∞–∫. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –µ—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –ø–æ–ª—É—á–∏—Ç–µ –∫–∞–∫–∏–µ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏, –≤—Å–µ —Ä–∞–≤–Ω–æ —Å—Ç–æ–∏—Ç –¥–≤–∞–∂–¥—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É –≤–∞—Å —É–∫–∞–∑–∞–Ω–∞ `@Suspendable` –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ.

–°–≤—è–∑—ã–≤–∞–µ–º —ç—Ç–æ —Å –ø—Ä–∏–º–µ—Ä–æ–º. `call`, `collectSignatures` –∏ `recordTransaction` –ø–æ–º–µ—á–µ–Ω—ã `@Suspendable`. –ò `collectSignatures`, –∏ `recordTransaction` –≤—ã–∑—ã–≤–∞—é—Ç `subFlow`, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏. `call` —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—à–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è.

–≠—Ç–æ –Ω–∞—à–∞ –ø–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞ —Å `subFlows` (–ø–æ–¥–ø–æ—Ç–æ–∫–∞–º–∏). –Ø –ø–æ–º–µ—â—É –Ω–µ–±–æ–ª—å—à–æ–π —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –Ω–∏—Ö –∏ –¥–∞—Ç—å —Ç–µ–º–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–Ω–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç.

–í–µ—Ä–Ω–µ–º—Å—è –∫ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ.

–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Suspendable` - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º–∏, –∫–∞–∫ —è –æ–±—Ä–∞—Ç–∏–ª –≤–Ω–∏–º–∞–Ω–∏–µ, —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏. –ò—Ç–∞–∫, –ø–æ–∑–≤–æ–ª—å—Ç–µ –º–Ω–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –µ—â–µ —Ä–∞–∑.

> –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é `@Suspendable` –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–º

–í—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –∫–∞–∫ —Ç—Ä—É–¥–Ω–æ –Ω–µ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –≤—Å–µ —ç—Ç–æ –≤–ø–ª–æ—Ç—å –¥–æ ü§¶‚Äç.

> –í–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é `@Suspendable` –∫ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

–î–∞–≤–∞–π —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –≤—ã –º–Ω–µ –ø–æ–Ω—è–ª–∏.

–¢–µ–ø–µ—Ä—å –º—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏, —Ç–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –±–æ–ª–µ–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `call`.

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –±—ã–ª –ø—Ä–∏–≤–µ–¥–µ–Ω –Ω–∏–∂–µ:
```kotlin
private fun transaction(): TransactionBuilder {
  val notary: Party = serviceHub.networkMapCache.notaryIdentities.first()
  val issueCommand: Command<IOUContract.Commands.Issue> =
    Command(IOUContract.Commands.Issue(), state.participants.map { it.owningKey })
  val builder = TransactionBuilder(notary = notary)
  builder.addOutputState(state, IOUContract.IOU_CONTRACT_ID)
  builder.addCommand(issueCommand)
  return builder
}
```
–î–ª—è —Ü–µ–ª–µ–π —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞ –º—ã –±—É–¥–µ–º –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å, —á—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ù–æ—Ç–∞—Ä–∏—É—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –±—ã—Ç—å –ª–µ–Ω–∏–≤—ã–º–∏ –∏ –ø—Ä–æ—Å—Ç–æ –±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–π –∏–∑ —Å–ø–∏—Å–∫–∞. –ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —Ç–∞–∫–æ–µ –ù–æ—Ç–∞—Ä–∏—É—Å, –∫–∞–∫ –∏ —Ä–∞–Ω–µ–µ, —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –≤–∞–º –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å [–æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–æ–Ω—è—Ç–∏—è–º–∏ Corda](https://docs.corda.net/key-concepts-notaries.html), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ö–æ—Ä–æ—à–µ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –≤–∞–º –º–∏–Ω–∏–º—É–º –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è. –ù–æ—Ç–∞—Ä–∏—É—Å - —ç—Ç–æ —É–∑–µ–ª, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ –≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –µ–º—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –±—ã–ª–æ –¥–≤–æ–π–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ.

`serviceHub` –¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ç–µ—Ö –ø–æ—Ä, –∫–∞–∫ –º—ã –æ—Ç–Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª–∏ `FlowLogic`; —Ñ—É–Ω–∫—Ü–∏—è `networkMapCache` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω –≤ —Å–µ—Ç–∏, –∞ `notaryIdentities` —Å—É–∂–∞–µ—Ç –∏—Ö –¥–æ –ù–æ—Ç–∞—Ä–∏—É—Å–æ–≤. –ö–∞–∫ —è —É–ø–æ–º–∏–Ω–∞–ª —Ä–∞–Ω–µ–µ, –º—ã –±—É–¥–µ–º –ª–µ–Ω–∏–≤—ã –∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑—å–º–µ–º –ø–µ—Ä–≤–æ–≥–æ –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞. –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –ù–æ—Ç–∞—Ä–∏—É—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

–î–∞–ª–µ–µ –º—ã —Å–æ–∑–¥–∞–µ–º –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `IOUContract.Commands.Issue`, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ä–∞–Ω–µ–µ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∞–º —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –∫–ª—é—á–∏ —Å—Ç–æ—Ä–æ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. 'it' - —ç—Ç–æ 'Party' (—Å—Ç–æ—Ä–æ–Ω–∞/—É—á–∞—Å—Ç–Ω–∏–∫), –∞ `owningKey` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á. –¢–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∞–≤—à–∏–µ—Å—è –≤ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ —Å–≤–æ–π—Å—Ç–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è `participants`, –Ω–æ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Å–ø–∏—Å–æ–∫.

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–µ–Ω—ã –∏–ª–∏ —Å–æ–∑–¥–∞–Ω—ã. –¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å –≤—Å–µ –≤–º–µ—Å—Ç–µ. `TransactionBuilder` –¥–µ–ª–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ. –ù–æ—Ç–∞—Ä–∏—É—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ–≥–æ –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ `TransactionBuilder`, –Ω–æ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –µ–≥–æ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∂–µ. `addOutputState` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `state` (—Å–æ—Å—Ç–æ—è–Ω–∏–µ), –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ –ø–æ—Ç–æ–∫, –≤–º–µ—Å—Ç–µ —Å –∏–º–µ–Ω–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –µ–≥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç. –ü–æ–º–Ω–∏—Ç–µ, —è —É–ø–æ–º—è–Ω—É–ª –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–æ –∏–º—è: —á–µ—Ä–µ–∑ –æ—Ç–∫—Ä—ã—Ç–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –≤ –æ–±—ä–µ–∫—Ç–µ (–∫–∞–∫ —ç—Ç–æ –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—Ç Corda) –∏–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—è –∏–º—è –∫–ª–∞—Å—Å–∞, - –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –∫–æ–Ω–µ—á–Ω–∞—è —Ü–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–π –∂–µ. –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, - —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–æ–∑–¥–∞–ª–∏.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–°–ª–µ–¥—É—é—â–∏–π –±–ª–æ–∫ –∫–æ–¥–∞ –ø–æ—Å–≤—è—â–µ–Ω –ø—Ä–æ–≤–µ—Ä–∫–µ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –æ–ø—è—Ç—å –∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∏–∂–µ:
```kotlin
private fun verifyAndSign(transaction: TransactionBuilder): SignedTransaction {
  transaction.verify(serviceHub)
  return serviceHub.signInitialTransaction(transaction)
}
```

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã –æ–±—Ä–∞–¥—É–µ–º—Å—è, —á—Ç–æ –≤—Å—ë, —á—Ç–æ –º—ã —Ö–æ—Ç–µ–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –≤–∫–ª—é—á–µ–Ω–æ, –º—ã –¥–æ–ª–∂–Ω—ã —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å. –ü—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `verify`, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `TransactionBuilder`. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –µ—Å–ª–∏ –∫–∞–∫–æ–µ-–ª–∏–±–æ –∏–∑ —É—Å–ª–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ü–æ—Å–∫–æ–ª—å–∫—É –≤ —ç—Ç–æ–º –∫–æ–¥–µ –Ω–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ—Ç–æ–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –æ—à–∏–±–∫–æ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ —Å—Ç–µ–∫—É.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–æ—à–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, –¥–ª—è –Ω–∞—Å (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞) —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `serviceHub.signInitialTransaction`. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é `SignedTransaction`, –∫–æ—Ç–æ—Ä–∞—è –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–ø–∏—Å–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç–∞–Ω–µ—Ç –≤–∞–∂–Ω—ã–º –ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –ù–æ—Ç–∞—Ä–∏—É—Å –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—ã–ª–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –≤—Å–µ–º–∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏.

## –°–±–æ—Ä –ø–æ–¥–ø–∏—Å–µ–π —É –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤

–¢–µ–ø–µ—Ä—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º. –°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –ø–æ–¥–ø–∏—Å–µ–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤, —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ö–∞–∫ —Ç–æ–ª—å–∫–æ —ç—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ —Å–æ–≥–ª–∞—Å–Ω—ã —Å —Ç–µ–º, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º.

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –∫–æ–¥, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Å–±–æ—Ä –ø–æ–¥–ø–∏—Å–µ–π —É –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤:
```kotlin
@Suspendable
private fun collectSignature(
  transaction: SignedTransaction,
  sessions: List<FlowSession>
): SignedTransaction = subFlow(CollectSignaturesFlow(transaction, sessions))
```
–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã –ø–æ –¥–∞–Ω–Ω–æ–π —Å–¥–µ–ª–∫–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –≤ —Å–ø–∏—Å–∫–µ `participants` (—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤). –ï—Å–ª–∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å, –∫–∞–∫ –±—ã–ª–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–ª–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —Ç–æ –≤ –Ω—ë–º —Å–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã, –ø–æ—ç—Ç–æ–º—É —Ç–æ–ª—å–∫–æ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—É–¥—É—Ç –ø–æ–¥–ø–∏—Å–∞—Ç—å —Å–¥–µ–ª–∫—É. –•–æ—Ç—è —ç—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–µ—Ä–Ω–æ, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É–∂–µ –±—ã–ª–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º, –ø–æ—ç—Ç–æ–º—É —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (`lender` *–∫—Ä–µ–¥–∏—Ç–æ—Ä*) –¥–æ–ª–∂–µ–Ω –ø–æ–¥–ø–∏—Å–∞—Ç—å –µ—ë.

–ß—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º, –Ω–∞–¥–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å —Å –Ω–∏–º–∏ —Å–µ–∞–Ω—Å. –ö–æ–¥ –Ω–∏–∂–µ –¥–µ–ª–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∏–∑ –Ω–µ–≥–æ —Å–µ—Å—Å–∏–∏ —è–≤–ª—è—é—Ç—Å—è –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã—à–µ:
```kotlin
val sessions: List<FlowSession> = (state.participants - ourIdentity).map { initiateFlow(it) }.toSet().toList()
```
–§—É–Ω–∫—Ü–∏—è `initiateFlow` —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –¥–ª—è –¥—Ä—É–≥–æ–≥–æ —É–∑–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `Party` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `FlowSession`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–≤—è–∑–∏. –ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –Ω–µ –Ω—É–∂–Ω–æ —Å–Ω–æ–≤–∞ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –ø–æ—ç—Ç–æ–º—É –≤ –∫–æ–¥–µ –¥–ª—è –Ω–µ–≥–æ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–µ—Å—Å–∏—è —Å–≤—è–∑–∏. –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ –º—ã –∑–Ω–∞–µ–º, –∫—Ç–æ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã—É—é —Å–µ—Å—Å–∏—é `FlowSession`:
```kotlin
val session = initiateFlow(state.lender)
```
–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Å–ø–∏—Å–æ–∫ `participants` (—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤), –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–¥–∏–º —Å–µ—Å—Å–∏—é –¥–ª—è `lender` (–∫—Ä–µ–¥–∏—Ç–æ—Ä–∞), –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–∞—à–∏ –∑–Ω–∞–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –æ–Ω–∏ (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä –∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä) —è–≤–ª—è—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏.

`FlowSession` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ `CollectSignaturesFlow` –≤–º–µ—Å—Ç–µ —Å `SignedTransaction`, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º. `CollectSignaturesFlow` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `SignedTransaction` –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É (–∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º, –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å), –∏ –æ–∂–∏–¥–∞–µ—Ç –∏—Ö –æ—Ç–≤–µ—Ç–∞. –ú—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ. –ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ `SignedTransaction` –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –≤—Å–µ–º–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–°–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:
```kotlin
subFlow(FinalityFlow(transaction, sessions))
```
–•–æ—Ç—è –∑–¥–µ—Å—å –≤—Å–µ–≥–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞, —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –∫–æ–¥–∞ –º–æ—â–µ–Ω, –∫–∞–∫ —É–¥–∞—Ä. `FinalityFlow`, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Ü–µ –≤–∞—à–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ.

–í—ã–∑–æ–≤ `FinalityFlow`:
* –û—Ç–ø—Ä–∞–≤–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ù–æ—Ç–∞—Ä–∏—É—Å—É (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
* –ó–∞–ø–∏—à–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞
* –°–æ–æ–±—â–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∞—Ç—å –µ–µ –≤ –∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–ù–µ–º–Ω–æ–≥–æ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –ø–µ—Ä–≤–æ–º –ø—É–Ω–∫—Ç–µ. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ù–æ—Ç–∞—Ä–∏—É—Å—É, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∏–º–µ–µ—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤—Ö–æ–¥–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ù–æ—Ç–∞—Ä–∏—É—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–Ω–µ–µ –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –Ω–µ—Ç –≤—Ö–æ–¥–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Ç–æ –ù–æ—Ç–∞—Ä–∏—É—Å—É –Ω–µ—á–µ–≥–æ –¥–µ–ª–∞—Ç—å. –ù–µ –ø–æ—Å—ã–ª–∞—Ç—å –µ–≥–æ –ù–æ—Ç–∞—Ä–∏—É—Å—É - —ç—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É–±–∏—Ä–∞–µ—Ç –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—É—é –≤–ø—É—Å—Ç—É—é —Ä–∞–±–æ—Ç—É.

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ —à–∞–≥–∞ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ù–æ—Ç–∞—Ä–∏—É—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–∞–∫, –∫–∞–∫ –æ–±—ã—á–Ω–æ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤–µ–¥—É—â–µ–µ –∫ –≤—ã—Ö–æ–¥—É –∏–∑ –ø–æ—Ç–æ–∫–∞.

## The Responder Flow (–ü–æ—Ç–æ–∫ –æ—Ç–≤–µ—Ç—á–∏–∫–∞)

–í—Å—ë –≤ –ø–æ—Ç–æ–∫–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–º–æ—Ç—Ä–µ–ª–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞. –í–æ –≤—Ä–µ–º—è –ø—Ä–∏–º–µ—Ä–∞ –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É, –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ ¬´–≤–µ—â–∏¬ª. –í —ç—Ç–æ–º –∫—Ä–∞—Ç–∫–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç:
```kotlin
@InitiatedBy(IOUIssueFlow::class)
class IOUIssueFlowResponder(val flowSession: FlowSession) : FlowLogic<SignedTransaction>() {

  @Suspendable
  override fun call(): SignedTransaction {
    val signTransactionFlow = object : SignTransactionFlow(flowSession) {
      override fun checkTransaction(stx: SignedTransaction) = requireThat {
        val output = stx.tx.outputs.single().data
        "This must be an IOU transaction" using (output is IOUContract.IOUState)
      }
    }
    val signedTransaction = subFlow(signTransactionFlow)
    return subFlow(ReceiveFinalityFlow(otherSideSession = flowSession, expectedTxId = signedTransaction.id))
  }
}
```
–ö–∞–∫ –∏ –≤—Å—ë –ø—Ä–µ–∂–¥–µ, —ç—Ç–æ—Ç –∫–æ–¥ –±—ã–ª –ø—Ä–∏–≤–µ–¥–µ–Ω —Ä–∞–Ω–µ–µ –≤ –ø–æ—Å—Ç–µ.

–ù–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ —è–≤–ª—è–µ—Ç—Å—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@InitiatedBy`, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç, –æ—Ç –∫–∞–∫–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –∫—É–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –Ω–∏—Ö. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ `IOUIssueFlow`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã —É–∂–µ –ø—Ä–æ—à–ª–∏.

–ü–æ—Å–∫–æ–ª—å–∫—É `IOUIssueFlowResponder` —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–º, –æ–Ω –Ω–∞—Å–ª–µ–¥—É–µ—Ç `FlowLogic` –∏ –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ `call`. `FlowSession` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ - —ç—Ç–æ —Å–µ—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º –¥–ª—è —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º –ø–æ—Ç–æ–∫–æ–º. `@Suspendable` —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è `call`, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ –∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ.

`SignTransactionFlow` - —ç—Ç–æ –¥—Ä—É–≥–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ `CollectSignaturesFlow`, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –≤ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–µ. –≠—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `checkTransaction`. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ª—é–±—É—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É, –∫–æ—Ç–æ—Ä—É—é –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏. –§—É–Ω–∫—Ü–∏—è `call` –≤ `SignTransaction` –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É, —Ç–∞–∫ —á—Ç–æ —ç—Ç–æ —à–∞–Ω—Å –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ (–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞). `checkTransaction` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–≤—Å–µ–º –º–∞–ª–æ –∫–æ–¥–∞ –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞–º, –∫–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å, —è –ø–æ–∑–≤–æ–ª—é –≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–µ —è—Ä–∫–æ–µ –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é...

–î–∞–ª–µ–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `subFlow` –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `SignTransactionFlow` –∏ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–ª–µ–¥—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `checkTransaction`, –∏ –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ, —Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç—É–¥–∞, –æ—Ç–∫—É–¥–∞ –æ–Ω–∞ –ø—Ä–∏—à–ª–∞.

–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥ - —ç—Ç–æ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `ReceiveFinalityFlow`. –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–Ω—å—à–µ —Ä–∞–±–æ—Ç–∞–ª–æ –≤ Corda 3, –≥–¥–µ –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –ø–æ–ª—É—á–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ—Ç –ø–æ–¥–ø–æ—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–∂–∏–¥–∞–µ–º–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –æ–±–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ —Å–≤–æ–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≥–æ—Ç–æ–≤—É—é –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –±—É–¥—É—â–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.

–ö–æ–¥ –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–º –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ, –∫–æ–¥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –≠—Ç–æ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–æ–±—â–∏—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –∏ –µ–≥–æ –æ—Ç–≤–µ—Ç—á–∏–∫–∞–º.

## –†–∞–±–æ—Ç–∞ —Å subFlows (–ø–æ–¥–ø–æ—Ç–æ–∫–∞–º–∏)

–í—ã –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `subFlow`, —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—É—é –ø–æ –ø—Ä–∏–º–µ—Ä–∞–º –∫–æ–¥–∞. –ù–∞–∫–æ–Ω–µ—Ü, —è –¥—É–º–∞—é, —á—Ç–æ –º—ã –¥–æ—à–ª–∏ –¥–æ —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ —è —Å–º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –Ω–µ–π –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.

`subFlows` - —ç—Ç–æ –ø–æ—Ç–æ–∫–∏, –ø–æ–¥–æ–±–Ω—ã–µ —Ç–æ–º—É, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, `CollectSignaturesFlow` –∏ `FinalityFlow` –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω—ã —Å–∞–º–∏ –ø–æ —Å–µ–±–µ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –Ω–µ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω—ã `@InitiatingFlow`, –ø–æ—ç—Ç–æ–º—É –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ `subFlow`. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö Corda –∏–∑ "–∫–æ—Ä–æ–±–∫–∏", –ø–æ–ø–∞–¥–∞—é—Ç –≤ —ç—Ç—É –∂–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é.

–í—Å–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç `subFlow` - —ç—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—Ç–æ–∫, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –Ω–µ–≥–æ, –≤—ã–∑—ã–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Ç–æ–∫–∞ `call` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—è —Ç–æ, —á—Ç–æ –ø–æ—Ç–æ–∫ –æ–±—ã—á–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. –ü–æ—Ç–æ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ `subFlow`, –µ—Å–ª–∏ –Ω–∞–º –∫–æ–≥–¥–∞-–ª–∏–±–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, `IOUIssueFlow` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω –≤ –Ω–µ–≥–æ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞.

Corda –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–∏ –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ç–∏–ø–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –≤ –Ω–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö. –û–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `subFlow` –∏ –≤–∫–ª—é—á–∞—é—Ç: `CollectSignaturesFlow`, `SignTransactionFlow`, `SendTransactionFlow`, `ReceiveTransactionFlow` –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ.

# –ó–∞–ø—É—Å–∫ –ø–æ—Ç–æ–∫–∞

–í —ç—Ç–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –≤—ã–∑–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –∏–∑–≤–Ω–µ —É–∑–ª–∞ Corda.

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ, –∫–∞–∂–¥—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –ø–æ-—Å–≤–æ–µ–º—É. –ù–æ –¥–∞–≤–∞–π—Ç–µ –≤—ã–±–µ—Ä–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏ –ø—Ä–æ—Å—Ç–æ–π –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `startFlow`:
```kotlin
proxy.startFlow(::IOUIssueFlow, state)
```
–í–æ—Ç —Ç–∞–∫. –ö–∞–∫ —è —É–∂–µ —Å–∫–∞–∑–∞–ª, –∫–æ—Ä–æ—Ç–∫–æ –∏ –ø—Ä–æ—Å—Ç–æ. `proxy` –∏–º–µ–µ—Ç —Ç–∏–ø `CordaRPCOps`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —É–∑–ª–æ–º Corda —á–µ—Ä–µ–∑ RPC. `startFlow` - –æ–¥–Ω–∞ –∏–∑ —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–º—è –∫–ª–∞—Å—Å–∞ –ø–æ—Ç–æ–∫–∞ –≤–º–µ—Å—Ç–µ —Å –ª—é–±—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ—Ç–æ–∫–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ `call` —Ñ—É–Ω–∫—Ü–∏—è `IOUIssueFlow` –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è `IOUState` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø–æ—Ç–æ–∫–µ.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `FlowHandle<T>`, –≥–¥–µ `T` - —ç—Ç–æ —Ç–æ—Ç –∂–µ –≥–µ–Ω–µ—Ä–∏–∫ —Ç–∏–ø –≤—ã–∑–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `SignedTransaction`. –ó–∞—Ç–µ–º –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `returnValue` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è `CordaFuture`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω. `CordaFuture` —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `Future` —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –æ–¥–Ω–∏–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è `toCompletableFuture`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–ª–∏ –Ω–µ –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –≤–∞—Å (–≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –º–µ–Ω—è).

# –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–æ—Ç –º—ã –∏ –ø–æ–¥–æ—à–ª–∏ –∫ –∑–∞–∫–ª—é—á–µ–Ω–∏—é.

–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –ø–æ—Å—Ç –ø–æ–º–æ–≥ –≤–∞–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å Corda. –ï—Å—Ç—å –µ—â–µ –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ, —á–µ–º—É –º–æ–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É —è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤—ã. –ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ IOU –ø—Ä–æ—Ü–µ—Å—Å ("—è –¥–æ–ª–∂–µ–Ω –≤–∞–º") –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —ç—Ç–æ–≥–æ. –°–æ—Å—Ç–æ—è–Ω–∏—è - —ç—Ç–æ —Ñ–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å–µ—Ç–∏, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∞ –ø–æ—Ç–æ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –° —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –≤—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ —Å –ø–æ—Ç–æ–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –≤ –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ, –Ω–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤—ã –¥–æ–ª–∂–Ω—ã —Ö–æ—Ä–æ—à–æ –ø–æ–º–æ—á—å –≤–∞–º –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –ª—é–±—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å.

–ï—Å–ª–∏ –≤—ã —Å–æ—á–ª–∏ –¥–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –ø–æ–ª–µ–∑–Ω—ã–º –∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –≤—ã—Ö–æ–¥–∞ –º–æ–∏—Ö –ø–æ—Å—Ç–æ–≤, —Ç–æ –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –º–µ–Ω—è –≤ Twitter –ø–æ –∞–¥—Ä–µ—Å—É [@LankyDanDev](https://twitter.com/lankydandev).

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ [–∫–∞–Ω–∞–ª—É Corda –≤ Slack](https://slack.corda.net/), –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ Corda –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞.